<spec>
  <entry>
    <xpath>/document</xpath>
    <children>
      <optional>metadata</optional><!-- occurs 0 or 1 times -->
      <element>content</element><!-- occurs exactly once -->
    </children>
    <notext/>
    <documentation>
The document element is the root.
It may have a metadata element and must have a content element.
    </documentation>
  </entry>

  <entry>
    <xpath>/document/metadata</xpath>
    <children>
      <subset-of><!-- subsetsof: at most one of each in the set; unordered -->
	<element>cnxml-version</element>
	<element>pspicture-generator-version</element>
      </subset-of>
    </children>
    <notext/>
    <documentation>
The metadata section contains information about the XML document itself.
Only version numbers at this time.
You must not edit this section manually, unless you really know what you're doing.
    </documentation>
  </entry>

  <entry>
    <xpath>/document/metadata/cnxml-version</xpath>
    <text>
      <pre-processing-callback>strip</pre-processing-callback>
    </text>
    <validation-callback>is_version_number</validation-callback>
  </entry>

  <entry>
    <xpath>/document/metadata/pspicture-generator-version</xpath>
    <text>
      <pre-processing-callback>strip</pre-processing-callback>
    </text>
    <validation-callback>is_version_number</validation-callback>
  </entry>

  <entry>
    <xpath>/document/content</xpath>
    <children>
      <one-of>
	<any-number>
	  <element>section</element>
	</any-number>
	<reference>block-element</reference>
      </one-of>
    </children>
    <notext/>
  </entry>

  <entry>
    <xpath>/document/content//section</xpath>
    <children>
      <element>title</element>
      <optional>shortcode</optional>
      <reference>block-element</reference>
    </children>
    <notext/>
  </entry>

  <entry id="block-element">
    <children>
      <any-number>
	<one-of>
	  <element>section</element>
	  <element>para</element>
	  <element>video</element>
	  <element>presentation</element>
	  <element>simulation</element>
	  <element>list</element>
	  <element>equation</element>
	  <element>latex</element>
	  <element>worked_example</element>
	  <element>figure</element>
	  <element>exercises</element>
	  <element>image</element>
	  <element>table</element>
	  <element>definition</element>
	  <element>activity</element>
	</one-of>
      </any-number>
    </children>
  </entry>


<!--
/document/content//section/title
contains :inline-element:
text

/document/content//section/shortcode
text.strip
validation-callback: is_shortcode

:block-element:/para
-->

</spec>
